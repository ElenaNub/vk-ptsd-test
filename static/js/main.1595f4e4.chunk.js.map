{"version":3,"sources":["components/HomePanel.js","data/questions.js","components/QuestionPanel.js","components/ResultPanel.js","App.js","index.js","assets/555.png"],"names":["HomePanel","_ref","id","userInfo","go","React","createElement","Panel","PanelHeader","Div","style","textAlign","paddingTop","Fragment","Avatar","size","src","photo_200","Title","level","weight","marginTop","first_name","Button","mode","onClick","type","questions","labels","QuestionPanel","data","current","answers","value","setValue","useState","String","hoveredIndex","setHoveredIndex","answerWidth","setAnswerWidth","useEffect","bridge","send","catch","err","console","log","async","banner_location","error","show","handler","_ref2","detail","subscribe","unsubscribe","ctx","document","getContext","font","window","getComputedStyle","body","widths","map","l","measureText","width","Math","max","headerText","concat","length","className","position","backgroundColor","sideImage","alt","top","left","zIndex","separator","padding","whiteSpace","overflowWrap","FormLayout","FormLayoutGroup","label","index","key","onMouseEnter","onMouseLeave","Radio","name","checked","onChange","disabled","next","payload","answer","Number","interp","score","ResultPanel","reduce","s","v","Text","initialState","started","Array","fill","reducer","state","action","_objectSpread","slides","title","text","App","dispatch","useReducer","setUserInfo","modal","setModal","slideIndex","setSlideIndex","user","e","lastShown","localStorage","getItem","now","Date","parseInt","setItem","toString","activePanel","modalRoot","ModalRoot","activeModal","onClose","ModalCard","actions","display","flexDirection","justifyContent","alignItems","margin","maxWidth","minHeight","boxSizing","border","borderRadius","height","overflow","slide","i","right","bottom","opacity","pointerEvents","transition","gap","prevSlide","prev","nextSlide","_","AppRoot","SplitLayout","SplitCol","View","ReactDOM","render","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.1595f4e4.chunk.js","sourcesContent":["import React from 'react';\r\nimport {\r\n  Panel,\r\n  PanelHeader,\r\n  Div,\r\n  Avatar,\r\n  Title,\r\n  Button\r\n} from '@vkontakte/vkui';\r\n\r\nexport default function HomePanel({ id, userInfo, go }) {\r\n  return (\r\n    <Panel id={id}>\r\n      <PanelHeader>Тест на ПТСР</PanelHeader>\r\n      <Div style={{ textAlign: 'center', paddingTop: 16 }}>\r\n        {userInfo && (\r\n          <>\r\n            <Avatar size={96} src={userInfo.photo_200} />\r\n            <Title level=\"2\" weight=\"medium\" style={{ marginTop: 12 }}>\r\n              {userInfo.first_name}, привет!\r\n            </Title>\r\n          </>\r\n        )}\r\n        <Div style={{ marginTop: 16 }}>\r\n          Нажми кнопку, чтобы начать тест:\r\n        </Div>\r\n        <Button\r\n          size=\"l\"\r\n          mode=\"primary\"\r\n          onClick={() => go({ type: 'start' })}\r\n        >\r\n          Начать тест\r\n        </Button>\r\n      </Div>\r\n    </Panel>\r\n  );\r\n}\r\n","// 20 вопросов PCL-5\r\nconst questions = [\r\n    \"Повторяющиеся, нежелательные воспоминания о травматическом событии\",\r\n    \"Повторяющиеся кошмары, связанные с событием\",\r\n    \"Воспоминания, которые «врываются» неожиданно\",\r\n    \"Ощущение, что событие происходит снова\",\r\n    \"Сильный стресс при напоминании о событии\",\r\n    \"Физическая реакция (потливость, учащённое сердцебиение) при напоминании\",\r\n    \"Избегание воспоминаний, мыслей, чувств о событии\",\r\n    \"Избегание внешних напоминаний о событии\",\r\n    \"Чувство вины, стыда или злости из-за события\",\r\n    \"Чувство отчуждения от других людей\",\r\n    \"Проблемы с положительными эмоциями\",\r\n    \"Трудности с засыпанием или сном\",\r\n    \"Раздражительность или вспышки гнева\",\r\n    \"Опасливость, повышенная настороженность\",\r\n    \"Трудности с концентрацией внимания\",\r\n    \"Резкая реакция на резкие звуки или внезапные движения\",\r\n    \"Чувство безнадёжности\",\r\n    \"Снижение интереса к любимым занятиям\",\r\n    \"Ощущение, что будущее пустое или страшное\",\r\n    \"Всеобщее снижение активности и проявление пассивности\"\r\n  ];\r\n  \r\n  export default questions;\r\n  ","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Panel, PanelHeader, Div, Title, Button,\r\n  FormLayout, FormLayoutGroup, Radio\r\n} from '@vkontakte/vkui';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport questions from '../data/questions';\r\nimport sideImage from '../assets/555.png';\r\nimport './QuestionPanel.css';\r\n\r\nconst labels = ['Совсем не беспокоит','Слабо','Умеренно','Сильно','Очень сильно'];\r\n\r\nexport default function QuestionPanel({ id, data, go }) {\r\n  const { current, answers } = data;\r\n  const [value, setValue] = useState(\r\n    answers[current] != null ? String(answers[current]) : null\r\n  );\r\n  const [hoveredIndex, setHoveredIndex] = useState(null);\r\n  const [answerWidth, setAnswerWidth] = useState(null);\r\n\r\n  /* 🆕 1. инициализируем рекламу (делайте в App.js один раз, но здесь тоже сработает) */\r\n  useEffect(() => {\r\n    bridge.send('VKWebAppInitAds')\r\n      .catch(err => console.log('InitAds error:', err));\r\n  }, []);\r\n\r\n  /* 2. показываем баннер при монтировании панели */\r\n  useEffect(() => {\r\n    const show = async () => {\r\n      try {\r\n        // optional: запросить наличие баннера, чтобы не ловить Ads_No_Fill\r\n        await bridge.send('VKWebAppShowBannerAd', {\r\n          banner_location: 'bottom'\r\n        });\r\n        console.log('Запрос баннера отправлен');\r\n      } catch (error) {\r\n        console.log('Ошибка показа баннера:', error);\r\n      }\r\n    };\r\n    show();\r\n  }, []);\r\n\r\n  /* 🆕 3. подписываемся на события ― здесь фиксируется факт показа */\r\n  useEffect(() => {\r\n    const handler = ({ detail }) => {\r\n      switch (detail.type) {\r\n        case 'VKWebAppBannerAdUpdated':\r\n          console.log('✅ Баннер реально показан', detail.data); // вот этот момент идёт в статистику\r\n          break;\r\n        case 'VKWebAppBannerAdClosedByUser':\r\n          console.log('❌ Пользователь закрыл баннер');\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    };\r\n    bridge.subscribe(handler);\r\n    return () => bridge.unsubscribe(handler);\r\n  }, []);\r\n\r\n  /* … остальной ваш код без изменений … */\r\n\r\n  /* Сброс ответа при смене вопроса */\r\n  useEffect(() => {\r\n    setValue(answers[current] != null ? String(answers[current]) : null);\r\n  }, [current, answers]);\r\n\r\n  /* Вычисляем ширину радиокнопок */\r\n  useEffect(() => {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.font = window.getComputedStyle(document.body).font;\r\n    const widths = labels.map(l => ctx.measureText(l).width);\r\n    setAnswerWidth(Math.max(...widths) + 8 + 12 + 40);\r\n  }, []);\r\n\r\n  const next = () => {\r\n    if (value == null) return;\r\n    go({ type: 'answer', payload: { index: current, answer: Number(value) } });\r\n  };\r\n\r\n  const headerText = `Вопрос ${current + 1} / ${questions.length}`;\r\n\r\n  return (\r\n    <Panel id={id} className=\"qp-panel-wrapper\" style={{ position: 'relative', backgroundColor: 'transparent' }}>\r\n      {/* изображение справа */}\r\n      <img src={sideImage} alt=\"\" style={{ position:'absolute',top:111,left:250,width:500,zIndex:1 }} />\r\n\r\n      <PanelHeader style={{ backgroundColor:'transparent' }} separator={false}>\r\n        <div className=\"qp-header-label\">{headerText}</div>\r\n      </PanelHeader>\r\n\r\n      <Div style={{ padding:16,backgroundColor:'transparent' }}>\r\n        <Title level=\"3\" weight=\"bold\" className=\"qp-question-label\" style={{ whiteSpace:'normal',overflowWrap:'break-word' }}>\r\n          {questions[current]}\r\n        </Title>\r\n\r\n        <FormLayout>\r\n          <FormLayoutGroup mode=\"vertical\">\r\n            {labels.map((label, index) => (\r\n              <div\r\n                key={index}\r\n                className={`qp-answer-wrapper ${hoveredIndex===index?'hovered':''}`}\r\n                onMouseEnter={() => setHoveredIndex(index)}\r\n                onMouseLeave={() => setHoveredIndex(null)}\r\n                style={{ width: answerWidth ? `${answerWidth}px` : 'auto' }}\r\n              >\r\n                <Radio\r\n                  name={`q_${current}`}\r\n                  value={String(index)}\r\n                  checked={value === String(index)}\r\n                  onChange={() => setValue(String(index))}\r\n                  className=\"qp-answer-radio\"\r\n                >\r\n                  {label}\r\n                </Radio>\r\n              </div>\r\n            ))}\r\n          </FormLayoutGroup>\r\n        </FormLayout>\r\n\r\n        <Div style={{ textAlign:'center',marginTop:20 }}>\r\n          <Button size=\"l\" disabled={value == null} onClick={next}>\r\n            {current === questions.length - 1 ? 'Завершить' : 'Далее'}\r\n          </Button>\r\n        </Div>\r\n      </Div>\r\n    </Panel>\r\n  );\r\n}","import React from 'react';\r\nimport {\r\n  Panel, PanelHeader, Div, Title, Text, Button\r\n} from '@vkontakte/vkui';\r\nimport bridge from '@vkontakte/vk-bridge';\r\n/* простая интерпретация + советы */\r\nconst interp = (score) => {\r\n  if (score <= 19) return {\r\n    label: 'Симптомы минимальны',\r\n    detail: `Вы в пределах нормы. Сохраняйте режим сна и умеренную активность.\r\n    Вы способны к естественному и здоровому восстановлению после стресса. Эпизодические воспоминания, тревога или краткосрочные нарушения сна могут возникнуть, но не мешают повседневной жизни.\r\n    \r\n    Советы для поддержания устойчивости:\r\n\r\n    Постарайтесь ложиться спать в одно и тоже время,  спите 7-8 часов. Проветривайте помещение перед сном. \r\nЗанимайтесь физической активностью: быстрая ходьба, плавание, йога ≥ 150 мин/нед.\r\nДневник настроения : отмечайте, что вызывает всплески раздражения.\r\nСоциальная опора: общайтесь с близкими друзьями, делитесь переживаниями, если это Вам необходимо.\r\n\r\nПомните - невозможно полностью избежать стресса, главное - эффективно с ним справляться!`\r\n  };\r\n  if (score <= 39) return {\r\n    label: 'Зона риска',\r\n    detail: `Вы находитесь в зоне риска развития посттравматического стрессового расстройства: симптомы уже развиваются, но пока серьезно не мешают повседневной жизни.\r\n     Возможно, в недавнем времени Вы пережили сильный стресс и еще не восстановились от него. Если оставить всё как есть, состояние может ухудшиться.\r\n\r\n     Советы на ближайшие 4–6 недель ⏳:\r\n\r\n     Стабилизируйте сон : старайтесь ложиться и просыпаться в одно и тоже время, соблюдайте гигиену сна - избегайте кофеина и гаджетов за 60 минут до сна.\r\n     \r\n     Дыхательные практики : Вы можете использовать технику глубокого расслабления \"Дыхание 4-7-8\".  \r\n     Практика заключается во вдохе на счёт четыре, задержку дыхания на счёт семь и выдох на счёт восемь. Занимайтесь 10 минут в день, можете повторять несколько раз,\r\n      пока не почувствуете успокоение.\r\n     \r\n     Дневник триггеров : фиксируйте ситуации, места или события, вызывающие негативные переживания. Ищите повторяющиеся триггеры, отмечайте интенсивность переживаемых эмоций.\r\n     Для каждого триггера необходимо придумать способы, как можно его избежать или снизить его влияние. Постепенно нужно пробовать применять выбранные стратегии в реальной жизни.\r\n     \r\n     Дозируйте информационный поток : отключите пуш-уведомления новостных лент. Выберите несколько качественных инсточников информации, которым доверяете. \r\n     Это поможет отсеять ненужный шум и сосредоточиться на действительно важной информации.\r\n     Выделите конкретное «окно», к примеру, 20 минут в день на просмотр новостной ленты.\r\n     \r\n     Психопросвет: ознакомьтесь с коротким онлайн-курсом о стресс-менеджменте или прочтите лекцию ВОЗ «Самопомощь».\r\n     \r\n     Если через месяц баллы не снижаются, тревога возрастает и мешает работе — запланируйте разговор с психологом.`\r\n  };\r\n  if (score <= 59) return {\r\n    label: 'Вероятный ПТСР',\r\n    detail: `У Вас есть признаки клинического посттравматического стрессового расстройства. Вы отмечаете частые тревожные воспоминания, \r\n    стараетесь избегать того, что напоминает о пережитом, плохо спите и всё время живёте «на взводе». Стоит обратиться к травма-терапевту/КПТ-специалисту, выработать план помощи.\r\n    \r\n    Рекомендации:\r\n\r\n    1. Сходите к врачу-психиатру\r\nЭто не «для психов», а обычный медицинский визит, как к кардиологу. Врач оценит ваши симптомы и, если нужно, подберёт мягкие антидепрессанты или таблетки для сна. \r\nЛекарства не «делают овощем» — они снижают фон тревоги, чтобы вам было проще работать со своими чувствами.\r\n\r\n2. Начните регулярную психотерапию\r\nЛучше всего подходят разговорные методы, которые фокусируются на травме: когнитивно-поведенительная терапия или \r\nметод «переработки травматичных воспоминаний движением глаз». На практике это 8–12 встреч раз в неделю. \r\nУже после первых двух-трёх сеансов вы получите техники, как быстро «заземляться», когда накатывает всплеск тревоги.\r\n\r\n3. Составьте «план безопасности»\r\nЗапишите на листке:\r\n - три вещи, которые быстро успокаивают вас (например: холодная вода на запястья, дыхание 4–7–8, звонок другу);\r\n - людей, которым можно позвонить днём и вечером;\r\n - шаги «что я делаю, если мне очень плохо» (например: выйти на улицу, позвонить в скорую, попросить соседа о помощи).\r\nДержите этот лист рядом с кроватью или прикрепите на холодильник.\r\n\r\n4. Стабилизируйте сон\r\nСтарайтесь ложиться и просыпаться в одно и тоже время, соблюдайте гигиену сна - избегайте кофеина и гаджетов за 60 минут до сна. \r\nПроветривайте помещение перед сном, спите в полной темноте (если у Вас нет страха темноты) - это поможет улучшить качество сна и Ваше самочувствие днем.\r\n\r\n5.Движение и физические нагрузки\r\n Не изматывайте себя, достаточно 20 минут быстрой ходьбы, йоги или плавания утром или вечером.\r\n\r\n6.Питание\r\nТри основных приёма пищи без долгих голодовок и ночных перекусов.\r\nНашему мозгу важно знать, что «день предсказуем» — так тревога снижается сама.\r\n\r\n7. Ограничьте стимуляторы\r\nКофе после обеда, энергетики, алкоголь и частые новости усиливают тревожность. \r\nПопробуйте хотя бы две недели без «допинга» и без бесконечной ленты новостей – обычно люди отмечают, что спят спокойнее и вспышек тревоги становится меньше.\r\n\r\nКак понять, что идёте в верном направлении?\r\nЧерез месяц снова пройдите опрос. Если баллов станет меньше хотя бы на 10, вы на правильном пути. Если нет — обсудите с врачом и терапевтом, что можно усилить или изменить.\r\nПомните: пост-травматический стресс — это лечится. Главное — не оставаться с ним один на один и обращаться за помощью вовремя.`\r\n  };\r\n  return {\r\n    label: 'Высокие симптомы ПТСР',\r\n    detail: ` У Вас есть явные признаки клинического посттравматического стрессового расстройства.\r\n    Ваше тело и психика сейчас живут в режиме постоянной тревоги. Плохой сон, навязчивые воспоминания, вспышки злости или отчаяния, ощущение, что «опасность где-то рядом» — всё это очень изматывает и мешает нормально жить.\r\n\r\n    Рекомендации:\r\n\r\n    1. Срочно поговорите с врачом-психиатром\r\n    Это такой же специалист, как терапевт или кардиолог. Он выслушает вас, подберёт таблетки, которые:\r\n    - уменьшат ночные кошмары и улучшат сон;\r\n    - снизят уровень тревоги, чтобы день перестал ощущаться как «битва».\r\n    Обычно это лёгкие антидепрессанты и, при необходимости, средство для сна. При правильном подборе побочки минимальны.\r\n    \r\n    2. Подключите еженедельную психотерапию\r\n    Лучше всего подходят методы, где работают именно с травмой (например, когнитивно-поведенительная терапия для пост-травматического стресса или метод переработки травматичных воспоминаний движением глаз).\r\n     На первых же встречах вы получите набор упражнений, которые помогают «вынырнуть», когда накрывает флешбэк или паника.\r\n    \r\n    3. Сделайте «кризисный набор на случай шторма»\r\n    Лист безопасности:\r\n    - техника быстрого успокоения (холодная вода, техника дыхания «4-4-4-4», счёт предметов вокруг);\r\n    - номера экстренной помощи — 112 и круглосуточной линии доверия 8-800-2000-122;\r\n    - контакты двух людей, которым можно позвонить днём и ночью.\r\n    Безопасная среда: уберите из дома алкоголь и лишние таблетки, попросите близких не обсуждать тяжёлые новости при Вас.\r\n    Держите этот лист на видном месте — например, на холодильнике.\r\n    \r\n    4. Верните в жизнь чёткий распорядок\r\n    Сон: засыпайте и просыпайтесь в одно и то же время, спите не меньше 8 часов.\r\n    Еда: три основных приёма пищи, без долгих перерывов и ночных перекусов.\r\n    Движение: 20 минут быстрой ходьбы или растяжки утром и вечером.\r\n    Предсказуемый ритм дня даёт мозгу сигнал: «Я в безопасности, можно расслабиться».\r\n    \r\n    5. Сократите всё, что «подливает масла»\r\n    Крепкий кофе после обеда, энергетики, алкоголь, бесконечная лента новостей — всё это раскручивает тревогу. \r\n    Попробуйте две недели без стимуляторов и с «диетой новостей» (20 минут в день в чётко выбранное время). Обычно люди замечают, что спят лучше, а всплесков тревоги становится меньше.\r\n    \r\n    Как понять, что становится легче?\r\n    Через три-четыре недели снова пройдите тест. Если баллов стало заметно меньше, вы движетесь в верном направлении. \r\n    Если улучшений нет или появляются мысли о самоповреждении — немедленно сообщите об этом врачу и близким. \r\n    Помните: сильные ПТСР лечатся, но не нужно бороться с ними в одиночку. Помощь специалистов и поддержка близких — ваш мост к спокойной, наполненной жизни.`\r\n  };\r\n};\r\n\r\nexport default function ResultPanel({ id, data, go }) {\r\n  const { answers } = data;\r\n  const score = answers.reduce((s, v) => s + v, 0);\r\n  const { label, detail } = interp(score);\r\n\r\n  return (\r\n    <Panel id={id}>\r\n      <PanelHeader>Результат</PanelHeader>\r\n      <Div style={{ padding: 16 }}>\r\n        <Title level=\"2\">{score} баллов</Title>\r\n        <Text weight=\"medium\" style={{ marginTop: 8 }}>{label}</Text>\r\n        <Text style={{ marginTop: 12, whiteSpace: 'pre-line' }}>{detail}</Text>\r\n\r\n    <Div style={{ textAlign: 'center', marginTop: 24 }}>\r\n  {/* 1. Кнопка «Пройти снова» */}\r\n  <Button\r\n    size=\"l\"\r\n    mode=\"primary\"\r\n    onClick={() => go({ type: 'restart' })}\r\n  >\r\n    Пройти снова\r\n  </Button>\r\n\r\n  <div className=\"result-panel\">\r\n  {/* Контент результата */}\r\n</div>\r\n  \r\n \r\n</Div>\r\n\r\n        </Div>\r\n    \r\n    </Panel>\r\n  );\r\n  \r\n}\r\n","import React, { useReducer, useEffect, useState } from 'react';\r\nimport {\r\n  AppRoot,\r\n  SplitLayout,\r\n  SplitCol,\r\n  View,\r\n  ModalRoot,\r\n  ModalCard,\r\n  Button\r\n} from '@vkontakte/vkui';\r\nimport bridge from '@vkontakte/vk-bridge';\r\n\r\nimport HomePanel from './components/HomePanel';\r\nimport QuestionPanel from './components/QuestionPanel';\r\nimport ResultPanel from './components/ResultPanel';\r\n\r\nconst initialState = {\r\n  started: false,\r\n  current: 0,\r\n  answers: Array(20).fill(null),\r\n};\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case 'start':\r\n      return { ...initialState, started: true };\r\n    case 'answer': {\r\n      const { index, answer } = action.payload;\r\n      const answers = [...state.answers];\r\n      answers[index] = answer;\r\n      return { ...state, current: index + 1, answers };\r\n    }\r\n    case 'restart':\r\n      return { started: true, current: 0, answers: Array(20).fill(null) };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst slides = [\r\n  {\r\n    title: 'Что это?',\r\n    text: 'Это мини-приложение для самотестирования на посттравматическое стрессовое расстройство. '\r\n  },\r\n  {\r\n    title: 'О тесте',\r\n    text: 'Вопросы теста основаны на контрольном списке ПТСР для DSM-5, который оценивает 20 симптомов данного расстройства.'\r\n  },\r\n  {\r\n    title: 'Рекомендации',\r\n    text: 'По результатам тестирования приложение может предложить вам простые техники для самопомощи и соблюдения психогигиены.'\r\n  },\r\n  {\r\n    title: 'Важно знать',\r\n    text: 'Результат не заменяет консультацию врача. Он может подсказать, стоит ли обратиться за помощью.'\r\n  },\r\n  \r\n  {\r\n    title: 'Помните:',\r\n    text: 'Забота о ментальном здоровье так же важна, как и о здоровье тела ❤️'\r\n  }\r\n];\r\n\r\nexport default function App() {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const [modal, setModal] = useState(null);\r\n  const [slideIndex, setSlideIndex] = useState(0);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        await bridge.send('VKWebAppInit');\r\n        const user = await bridge.send('VKWebAppGetUserInfo');\r\n        setUserInfo(user);\r\n      } catch (e) {\r\n        console.log('VK Bridge error:', e);\r\n      }\r\n    })();\r\n\r\n    const lastShown = localStorage.getItem('slidesLastShown');\r\n    const now = Date.now();\r\n    if (!lastShown || now - parseInt(lastShown) > 172800000) {\r\n      setModal('intro');\r\n      localStorage.setItem('slidesLastShown', now.toString());\r\n    }\r\n  }, []);\r\n\r\n  const nextSlide = () => setSlideIndex((prev) => (prev + 1) % slides.length);\r\n  const prevSlide = () => setSlideIndex((prev) => (prev - 1 + slides.length) % slides.length);\r\n\r\n  const activePanel =\r\n    !state.started ? 'home' :\r\n    state.current < 20 ? 'question' :\r\n    'result';\r\n\r\n  const modalRoot = (\r\n    <ModalRoot activeModal={modal} onClose={() => setModal(null)}>\r\n      <ModalCard\r\n        id=\"intro\"\r\n        onClose={() => setModal(null)}\r\n        actions={\r\n          <Button size=\"l\" mode=\"primary\" onClick={() => setModal(null)}>\r\n            Понятно\r\n          </Button>\r\n        }\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          margin: 'auto',\r\n          maxWidth: '100vw',\r\n          minHeight: '100vh',\r\n          boxSizing: 'border-box',\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            border: '0px solid #5ea4ff',\r\n            borderRadius: 16,\r\n            backgroundColor: '#fff',\r\n            padding: 20,\r\n            boxSizing: 'border-box',\r\n            width: '100%',\r\n            height: 280,\r\n            position: 'relative',\r\n            overflow: 'hidden',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            flexDirection: 'column'\r\n          }}\r\n        >\r\n          {slides.map((slide, i) => (\r\n            <div\r\n              key={i}\r\n              style={{\r\n                position: 'absolute',\r\n                top: -30,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                margin: 'auto',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                textAlign: 'center',\r\n                padding: '20 20px',\r\n                width: '100%',\r\n                opacity: i === slideIndex ? 1 : 0,\r\n                pointerEvents: i === slideIndex ? 'auto' : 'none',\r\n                zIndex: i === slideIndex ? 2 : 1,\r\n                transition: 'opacity 0.4s ease-in-out'\r\n              }}\r\n            >\r\n              <h3>{slide.title}</h3>\r\n              <p>{slide.text}</p>\r\n            </div>\r\n          ))}\r\n          <div style={{ position: 'relative', marginTop: 200, display: 'flex', flexDirection: 'column', alignItems: 'center', zIndex: 3 }}>\r\n            <div style={{ display: 'flex', gap: 10 }}>\r\n              <Button mode=\"secondary\" size=\"s\" onClick={prevSlide}>←</Button>\r\n              <Button mode=\"secondary\" size=\"s\" onClick={nextSlide}>→</Button>\r\n            </div>\r\n            <div style={{ marginTop: 10, display: 'flex', gap: 8 }}>\r\n              {slides.map((_, i) => (\r\n                <div\r\n                  key={i}\r\n                  style={{\r\n                    width: 8,\r\n                    height: 8,\r\n                    borderRadius: '50%',\r\n                    backgroundColor: i === slideIndex ? '#5ea4ff' : '#ccc'\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ModalCard>\r\n    </ModalRoot>\r\n  );\r\n\r\n  return (\r\n    <AppRoot>\r\n      <SplitLayout modal={modalRoot}>\r\n        <SplitCol>\r\n          <View activePanel={activePanel} key={activePanel}>\r\n            <HomePanel id=\"home\" userInfo={userInfo} go={dispatch} />\r\n            <QuestionPanel id=\"question\" data={state} go={dispatch} />\r\n            <ResultPanel id=\"result\" data={state} go={dispatch} />\r\n          </View>\r\n        </SplitCol>\r\n      </SplitLayout>\r\n    </AppRoot>\r\n  );\r\n}\r\n","/* 1. Стили VK UI (должны подключаться ДО вашего CSS) */\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\n/* 2. Ваш глобальный CSS с градиентом */\r\nimport './App.css';\r\n\r\n/* 3. React-базовые импорты */\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\n/* 4. VK Bridge для инициализации приложения */\r\nimport bridge from '@vkontakte/vk-bridge';\r\n\r\n/* 5. Корневой компонент приложения */\r\nimport App from './App';\r\n\r\n/* 6. Инициализируем VK Bridge */\r\nbridge.send('VKWebAppInit');\r\n\r\n/* 7. (Необязательно) маленький хак, чтобы в dev-режиме\r\n      разблокировать клики, если вдруг VKUI наложит overlay */\r\nif (process.env.NODE_ENV === 'development') {\r\n  document.body.classList.add('vkui–dev-fix');   // см. App.css\r\n}\r\n\r\n/* 8. Монтируем приложение */\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n","module.exports = __webpack_public_path__ + \"static/media/555.b5e9bf96.png\";"],"sourceRoot":""}